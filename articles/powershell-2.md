---
title: "åŒã˜æ§‹æˆã®è¡¨ã®å€¤ã‚’åˆè¨ˆã™ã‚‹"
emoji: "ğŸ’¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Windows, PowerShell]
published: true
---

R ã¨ã‹ SQL ã ã¨ä¸Šæ‰‹ã„ã‚„ã‚Šæ–¹ãŒã‚ã‚‹æ°—ãŒã™ã‚‹ã€‚å†ç™ºæ˜ã‚’ã—ã¦ã„ã‚‹ã€‚

ã“ã‚“ãªæ„Ÿã˜ã®è¡¨ãŒï¼’ã¤ã‚ã‚‹æ™‚ã«

|label  |item1  |item2  |
|-------|-------|-------|
|A  |1  |2  |
|B  |2  |4  |
|C  |3  |6  |
|D  |4  |8  |

|label  |item1  |item2  |
|-------|-------|-------|
|A  |2  |1  |
|B  |4  |2  |
|C  |6  |3  |
|D  |8  |4  |
|E  |10 |5  |

ã“ã‚Œã‚‰ã® B åˆ—ã¨ C åˆ—ã‚’è¶³ã—ãŸæ–°ã—ã„è¡¨ã‚’ä½œã‚ŠãŸã„ã€‚å°šã€label ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ã§ã€è¡Œã¯å¢—æ¸›ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚åˆ—ã®å¢—æ¸›ã¯ç„¡ã„ã€‚

ã¾ãšã€å‰æã¨ãªã‚‹è¡¨ã‚’ 2 ã¤ä½œã‚‹ã€‚

```powershell
$table1 = 1..4 | % { [pscustomobject]@{ label=[char](64+$_); item1=$_; item2=($_*2) } }
$table2 = 5..1 | % { [pscustomobject]@{ label=[char](64+$_); item1=($_*2); item2=$_ } }
```

ã“ã®çŠ¶æ…‹ã§ã¯ä½¿ã„ã«ãã„ã®ã§ã€label ã§è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†è¾æ›¸ã«è©°ã‚è¾¼ã‚€ã€‚

```powershell
$dic1 = @{}; $table1 | % { $dic1.add($_.label, $_) }
$dic2 = @{}; $table2 | % { $dic2.add($_.label, $_) }
```

label ã‚’åˆ—æŒ™ã™ã‚‹ã€‚é€”ä¸­ã® `% { $_ }` ã¯ã€ã„ã‚ã‚†ã‚‹ flatten ã‚’ã—ã¦ãŠã‚Šã€`sort -u` ã§é‡è¤‡ã™ã‚‹ label ã‚’æ’é™¤ã—ã¦ã„ã‚‹ã€‚

```powershell
$table1.label, $table2.label | % { $_ } | sort -u | % {
    [pscustomobject]@{
        label = $_
        item1 = $dic1[$_].item1 + $dic2[$_].item2
        item2 = $dic1[$_].item2 + $dic2[$_].item2
    }
}
```

ä»¥ä¸Š
