---
title: "OracleLinux8.10 ã§æ¤œè¨¼ã‚µãƒ¼ãƒã‚’ä½œã‚‹ã¨ãã«æœ€åˆã«ã‚„ã‚‹ã“ã¨"
emoji: "ðŸ§"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Linux, Oracle, memo]
published: true
---

ãŠå®¶ã®æ¤œè¨¼ã‚µãƒ¼ãƒç”¨ã®å‚™å¿˜éŒ²ã§ã™ã€‚åŸºæœ¬ root ã§ã™ã€‚

Proxmox ä¸Šã®ä»®æƒ³ã‚µãƒ¼ãƒã¨ã—ã¦æ§‹ç¯‰ã—ã¾ã™ã€‚

å°šã€Oracle Linux ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ 8.10 RHCK ã§ã™ã€‚

## ä»®æƒ³ãƒžã‚·ãƒ³ã®è¨­å®š

Oracle Grid Infrastructure 21c ã‚’æ§‹æˆã—ãŸã„ã§ã™ã€‚

QEMU ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æœ‰åŠ¹ã«ã—ã¦ãŠãã¾ã™ã€‚

CPUã‚³ã‚¢ã¯ 2 ã‚³ã‚¢ã‚’å‰²ã‚Šå½“ã¦ã¦ãŠãã¾ã™ã€‚

ãƒ¡ãƒ¢ãƒªã¯ã€Grid Infrastructure ã®æœ€å°è¦ä»¶ã¯ 8GB ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€Database 21c ã‚’è¼‰ã›ã‚‹ã®ã§ 12GB ç¨‹åº¦å‰²ã‚Šå½“ã¦ã¦ãŠãã¾ã™ã€‚
å‹•ããŒæ‚ªã‘ã‚Œã°æ‹¡å¼µã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

å¾Œã§ swap ã‚’è¿½åŠ ã™ã‚‹ã®ã§ sda ã¯ 64GB ã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚
32GB ã®ãƒ‡ã‚£ã‚¹ã‚¯ã‚’2ã¤è¿½åŠ ã—ã¦ãŠãã¾ã™ï¼ˆsdb, sdcï¼‰

ã‚·ãƒ³ã‚°ãƒ«æƒ³å®šãªã®ã§ NIC ã¯ 1 ã¤ã§ã‚‚å¤§ä¸ˆå¤«ãªæ¨¡æ§˜ã€‚

## OSã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«è¨­å®š

ç‰¹ã«å¤‰æ›´ã—ã¦ã„ãªã„ãŸã‚çœç•¥ã€‚`dnf update` ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ç‚¹ã§è¡Œã‚ã‚Œã‚‹æ§˜å­ã€‚

ã“ã®æ™‚ç‚¹ã§ Proxmox ã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—ã—ã¦ãŠãã€ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¾ã™ã€‚

## å…¬é–‹éµèªè¨¼ã®è¨­å®š

åˆå›žãƒ­ã‚°ã‚¤ãƒ³æ™‚ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚â€»å…¥åŠ›å¾…ã¡ã«ãªã‚Šã¾ã™

```bash
mkdir -m 700 .ssh
# å…¥åŠ›å¾…ã¡ã«ãªã‚‹ã®ã§ã€å…¬é–‹éµã‚’è²¼ã‚Šä»˜ã‘ã¦ Ctrl+D ã™ã‚‹
cat > .ssh/authorized_keys
```

æ“ä½œç«¯æœ«(Windows)ã§ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```powershell
Get-Content "$home\.ssh\id_ed25519.pub" | % { $_ + "`n" } | Set-Clipboard
```

å…¥åŠ›å¾…ã¡ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ã€`Ctrl+D` ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚â€»å…¥åŠ›ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

```bash
cat > .ssh/authorized_keys
ssh-ed25519 xxxxxxxxxxxxxxxxxxxxxxx username@hostname
# ã“ã“ã§ Ctrl+D
```

```bash
chmod 600 .ssh/authorized_keys
```

## sudo ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰çœç•¥è¨­å®š

root ã«ãªã‚‹ã¨ãã‚‚åˆå›žã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ã—ã¾ã™ã€‚

```bash
sudo su -
```

`wheel` ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ¦ãƒ¼ã‚¶ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç„¡ã—ã§ `sudo` ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

```bash
echo '%wheel ALL=(ALL) NOPASSWD:ALL' > /etc/sudoers.d/wheel
```

## ãƒ›ã‚¹ãƒˆåã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¨­å®š

FreeIPA ãƒ‰ãƒ¡ã‚¤ãƒ³ã«å‚åŠ ã™ã‚‹å ´åˆã¯ FQDN å½¢å¼ã§è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã¨DNSã¯ãƒ›ãƒ¼ãƒ ãƒ«ãƒ¼ã‚¿ãƒ¼ã®åˆæœŸå€¤ã‚’ãã®ã¾ã¾ä½¿ã„ã¾ã™ã€‚

ãƒ›ã‚¹ãƒˆåã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…ƒã«æ©Ÿæ¢°çš„ã«è¨­å®šã—ã¾ã™ï¼ˆã™ãæ½°ã™ã“ã¨ãŒå¤šã„ã®ã§ã€‚ã€‚ã€‚ï¼‰

```bash
read -p 'IP Address?> ' IP
```

```bash
read -p 'Domain?> ' Domain
```

```bash
GW=192.168.1.1
DNS=192.168.1.1
nmcli con mod ens18 ipv4.address ${IP}/24
nmcli con mod ens18 ipv4.gateway $GW
nmcli con mod ens18 ipv4.dns $DNS
nmcli con mod ens18 ipv4.method manual

xx=$(echo $IP | tr '\.' '\n' | tail -n 1)
ver=$(cat /etc/os-release | grep "^VERSION=" | sed 's/.*=//' | tr -d '"' | sed 's/\..*//')
hostnamectl set-hostname "${xx}-oracle${ver}.${Domain}"

reboot
```

## hostsã®è¨­å®š

è‡ªåˆ†è‡ªèº«ã®åå‰è§£æ±ºã‚’ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¾ã™ã€‚

```bash
echo $(hostname -I) $(hostname) $(hostname -s) >> /etc/hosts
```
